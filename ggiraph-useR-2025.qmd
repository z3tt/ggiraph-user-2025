---
title: 'Plot Twist'
subtitle: 'Adding Interactivity to the<br>Elegance of <code>ggplot2</code> with <code>ggiraph</code>'
# author:
#   - name: Tanya Shapiro
#     email: tanya@indievisual.tech
#   - name: Cédric Scherer
#     email: viz@cedricscherer.com
author: "Tanya Shapiro & Cédric Scherer<br>useR 2025"
title-slide-attributes:
    data-background-image: img/bg-placeholder.png
    data-background-size: cover
format:
  revealjs:
    theme: src/slides.scss
    footer: ''
    transition: fade
    progress: true
    multiplex: false
    preview-links: true
    scrollable: false
    hide-inactive-cursor: true
    highlight-style: printing
    pause: true
editor: source
knitr:
  opts_chunk:
    dev: "ragg_png"
    retina: 1
    dpi: 300
execute:
  freeze: auto
  cache: false
  echo: true
  fig-width: 9
  fig-height: 5.5
  fig-align: center
---

```{r}
#| label: setup
#| include: false
#| cache: false
library(readr)
library(dplyr)
library(ggplot2)
library(ggiraph)

## fonts for html output
gdtools::register_gfont("Asap")
gdtools::register_gfont("Asap Condensed")
gdtools::register_gfont("Rethink Sans")
gdtools::register_gfont("Piazzolla")
gdtools::register_gfont("Spline Sans")
gdtools::register_gfont("Spline Sans Mono")
gdtools::addGFontHtmlDependency(family = c(
  "Asap", "Asap Condensed", "Rethink Sans", "Piazzolla", "Spline Sans", "Spline Sans Mono"
))

## plot scripts
source(here::here("showcase.R"))
source(here::here("example-css-styling.R"))
source(here::here("example-combined-plots.R"))
```



# Welcome<br>1 combined slide



---

::::: {.columns}

:::: {.column width="50%"}

### <span class='gradient-1'>Hi, I am Tanya</span>

<div style='margin:-25px 0 30px 0;'>
<a href='mailto:tanya@indievisual.tech' class='gradient-1' style='font-weight:700;'>tanya@indievisual.tech</a>
</div>

![](https://images.squarespace-cdn.com/content/v1/6022b7409a0cdd54b1bc0c5f/e2dd9234-dd19-48e5-8c5d-4eb64f7f5ea4/T2.jpg){fig-alt="Headshot of Tanya Shapiro" width="65%"}

<p class='about'>
<span class='entry'>BEFORE</span><br>
your previous job here
</p>
<p class='about'>
<span class='entry'>NOW</span><br>
your freelance title here
</p>

::::

:::: {.column width="50%"}

::: fragment

### <span class='gradient-2'>Hi, I am Cédric</span>

<div style='margin:-25px 0 30px 0;'>
<a href='mailto:viz@cedricscherer.com' class='gradient-2' style='font-weight:700;'>viz@cedricscherer.com</a>
</div>

![](img/ced-circular-logo-jungle.png){fig-alt="Headshot of Cédric Scherer" width="65%"}

<p class='about'>
<span class='entry'>BEFORE</span><br>
Computational Ecologist
</p>
<p class='about'>
<span class='entry'>NOW</span><br>
Independent professional in data visualization & information design
</p>

:::

::::

:::::



# Why we love {ggplot2}<br>3 slides



## Why we love {ggplot2}

Grammar of Graphics &rarr; cake slide  
TODO: Tanya



## {data-menu-title="Why we love ggplot2: Extensions" background-image="img/gghex.png" background-position="center" background-size="100%" background-color="#660068"}

::: {.sr-only}
A collection of extension packages for (and built with) ggplot2. A wild mixture of the most popular packages, packages for very specific use cases, packages that provide color palettes, and very experimental stuff.
:::



## {data-menu-title="Why we love ggplot2: Community" background-image="img/allison-horst-community.png" background-position="center" background-size="55%" background-color="#FFFFFF"}

::: {.sr-only}
An illustration by Allison Horst: A person in a cape that reads “code hero” who looks like they are flying through the air while typing on a computer while saying “I’m doing a think all on my own!” The coder’s arms and legs have ropes attached to two hot air balloons lifting them up, with labels on the balloons including “teachers”, “bloggers”, “friends”, “developers”. Below the code hero, several people carry a trampoline with labels “support” and “community” that will catch them if they fall.
:::

::: footer
Illustration by [Allison Horst](https://allisonhorst.com/allison-horst)
:::




# Why go interactive<br>1 slide



## Why go interactive

TODO: Tanya  
Use Cases Slide &rarr; storytelling (exploratory), web app development, interactive journalism, wow stakeholders (interactive slides) - but not everything has to be interactive (cf. goal, purpose, budget)  



# Why {ggiraph}



<!--## <span style='font-size:.7em;'>ggplot() + geom_*() + ...</span>-->
<!--
## {data-menu-title="Interactivity for ggplot2: A Comparison"}

```{r}
#| label: example-ggplot
#| echo: false
#| fig-align: center
p_ggplot 
```
-->


<!--## <span style='font-size:.7em;'>ggplotly(ggplot() + geom_*() + ...)</span>-->
## {data-menu-title="Interactivity for ggplot2: A Comparison" .center}

```{r}
#| label: example-plotly
#| echo: false
#| fig-align: center
p_plotly
```



<!--## <code style='font-size:.45em;'>girafe(ggobj = ggplot() + geom_interactive_*() + ...)</code>-->
## {data-menu-title="Interactivity for ggplot2: A Comparison" .center}

```{r}
#| label: example-ggiraph
#| echo: false
#| fig-align: center
girafe(ggobj = p_ggiraph, width_svg = 9, height_svg = 5.5)
```



## {data-menu-title="Interactivity for ggplot2: A Comparison" .center}

```{r}
#| label: example-ggiraph-styled
#| echo: false
#| fig-align: center
girafe(
  ggobj = p_ggiraph_css, width_svg = 9, height_svg = 5.5,
  options = list(
    opts_tooltip(
      use_fill = TRUE, offx = 18, offy = -35,
      css = "font-size:16pt;font-weight:500;padding:12px;font-family:asap condensed;"
    ),
    opts_hover(
      css = "opacity:1;stroke-width:3px;r:5px;transition:all 0.2s ease;"
    ),
    opts_hover_inv(css = "opacity:0.3;")
  )
)
```



## Why {ggiraph}

TODO: Tanya  
Text / Bullet point list reasons  



## Why {ggiraph}

TODO: Tanya  
Comparing geoms, geom ggplot -> geom ggiraph (show how similar)



# Examples


## {data-menu-title="Example CSS Styling" .center}

```{r}
#| label: heatmap-simpsons
#| echo: false
#| fig-align: center

girafe(
  ggobj = p_simpsons,
  width_svg = 10.5, height_svg = 8.5,
  fonts = list(sans = "Rethink Sans", serif = "Piazzolla"),
  options = list(
    opts_tooltip(
      opacity = 1, use_fill = TRUE, offx = 12, offy = 12,
      css = "background-color:white;padding:15px;lineheight:1.4;
             border-radius:12px;border:2px solid white;
             box-shadow: 5px 5px 5px rgba(0,0,0,0.3);"
    ),
    opts_sizing(width = .7),
    opts_hover_inv(css = "opacity:0.3;"),
    opts_hover(css = "stroke-width:2px;stroke:black;")
  )
)
```


## {data-menu-title="Example CSS Styling" .center}

```{r}
#| label: example-styling-css-1
#| eval: false
#| code-line-numbers: "1,2,3,4,5,6,7,8,9,10,11,12,13,14|2|3,4,5,6,7,8,9,10,11,12,13"
mutate(
  text_color = if_else(rating > 6.3 & rating < 8.5, "black", "white"),
  tooltip = paste0(
    "<span style='font-family:rethink sans;color:", text_color, ";'>", 
      "S", sprintf("%02d", season), " E", sprintf("%02d", episode), "<br>",
      "<b style='font-size:150%;font-family:piazzolla;'>", 
        str_replace_all(str_wrap(title, 22), "\\n", "<br>"), 
      "</b>", 
      "<br><br>IMDb Rating: ", sprintf("%1.1f", rating)),
    "</span>"
  )
```


## {data-menu-title="Example CSS Styling" .center}

```{r}
#| label: example-styling-css-2
#| eval: false
opts_tooltip(
  opacity = 1, use_fill = TRUE, offx = 12, offy = 12,
  css = "
background-color:white; padding:15px; lineheight:1.4;
border-radius:12px; border:2px solid white;
box-shadow: 5px 5px 5px rgba(0,0,0,0.3);
"
),
opts_hover_inv(css = "opacity:0.3;"),
opts_hover(css = "stroke-width:2px;stroke:black;")
```



## Example Tanya



## {data-menu-title="Example CSS Styling" .center}

```{r}
#| label: owid-combined
#| echo: false
#| fig-align: center
girafe(
  ggobj = combined_owid, width_svg = 12, height_svg = 5.3,
  options = list(
    opts_tooltip(use_fill = TRUE, css = "font-size:15px;font-weight:400;color:white;padding:7px;font-family:spline sans;lineheight:1.3;padding:10px;border-radius:5px;"), 
    opts_hover(css = "stroke:white;stroke-width:0.5px;opacity:1;"),
    opts_hover_inv(css = "opacity:0.2;"),
    opts_toolbar(position = "bottomright"),
    opts_zoom(min = 1, max = 4)
  )
)
```



## Example Tanya



## Wrap-Up



## 1:1 Questions



---

<center>
<video autoplay="true" loop="true" height="70%">
<source src="./img/uncharted-preview.mp4"> 
</video>
</center>

::: footer
[ggplot2-uncharted.com](https://www.ggplot2-uncharted.com/)
:::


