---
title: 'Plot Twist'
subtitle: 'Adding Interactivity to the<br>Elegance of <code>ggplot2</code> with <code>ggiraph</code>'
# author:
#   - name: Tanya Shapiro
#     email: tanya@indievisual.tech
#   - name: CÃ©dric Scherer
#     email: viz@cedricscherer.com
author: "Tanya Shapiro & CÃ©dric Scherer<br>useR 2025"
title-slide-attributes:
    data-background-image: img/bg-placeholder.png
    data-background-size: cover
format:
  revealjs:
    theme: src/slides.scss
    footer: ''
    menu: false
    transition: fade
    progress: true
    multiplex: false
    preview-links: true
    scrollable: false
    hide-inactive-cursor: true
    highlight-style: printing
    pause: true
editor: source
knitr:
  opts_chunk:
    dev: "ragg_png"
    retina: 1
    dpi: 300
execute:
  freeze: auto
  cache: true
  echo: true
  fig-width: 9
  fig-height: 5.5
  fig-align: center
---

```{r}
#| label: setup
#| include: false
#| cache: false
library(readr)
library(dplyr)
library(ggplot2)
library(ggiraph)

## fonts for html output
gdtools::register_gfont("Asap")
gdtools::register_gfont("Asap Condensed")
gdtools::register_gfont("Rethink Sans")
gdtools::register_gfont("Piazzolla")
gdtools::register_gfont("Spline Sans")
gdtools::register_gfont("Spline Sans Mono")

gdtools::addGFontHtmlDependency(family = c(
  "Asap", "Asap Condensed", "Rethink Sans", "Piazzolla", "Spline Sans", "Spline Sans Mono"
))

## plot scripts
source(here::here("showcase.R"))
source(here::here("example-css-styling.R"))
source(here::here("example-combined-plots.R"))
```



---

:::: {.columns}

::: {.column width="50%"}

### <span class='gradient-1'>Hi, I am Tanya</span>

<div style='margin:-25px 0 30px 0;'>
<a href='mailto:tanya@indievisual.tech' class='gradient-1' style='font-weight:700;'>tanya@indievisual.tech</a>
</div>

![](https://images.squarespace-cdn.com/content/v1/6022b7409a0cdd54b1bc0c5f/e2dd9234-dd19-48e5-8c5d-4eb64f7f5ea4/T2.jpg){fig-alt="Headshot of Tanya Shapiro" width="65%"}

<p class='about'>
<span class='entry'>BEFORE</span><br>
your previous job here
</p>
<p class='about'>
<span class='entry'>NOW</span><br>
your freelance title here
</p>

:::

::: {.column width="50%"}

### <span class='gradient-2'>Hi, I am CÃ©dric</span>

<div style='margin:-25px 0 30px 0;'>
<a href='mailto:viz@cedricscherer.com' class='gradient-2' style='font-weight:700;'>viz@cedricscherer.com</a>
</div>

![](img/ced-circular-logo-jungle.png){fig-alt="Headshot of CÃ©dric Scherer" width="65%"}

<p class='about'>
<span class='entry'>BEFORE</span><br>
Computational Ecologist
</p>
<p class='about'>
<span class='entry'>NOW</span><br>
Independent professional in data visualization & information design
</p>

:::

::::



# Why We ðŸ’œ {ggplot2}



## Why We ðŸ’™ {ggplot2}

Grammar of Graphics -> cake slide  
TODO: Tanya



## {data-menu-title="Why we love ggplot2: Extensions" background-image="img/gghex.png" background-position="center" background-size="100%" background-color="#660068"}

::: footer
<span style='color:#D3D3D3;'>
Explore Packages &rarr; <a style='color:#E8BEE9;' href='https://exts.ggplot2.tidyverse.org/gallery/'>ggplot2 Extension Gallery</a> + <a style='color:#E8BEE9;' href='https://github.com/erikgahner/awesome-ggplot2'>Awesome ggplot2 Project</a>
</span>
:::

::: {.sr-only}
A collection of extension packages for (and built with) ggplot2. A wild mixture of the most popular packages, packages for very specific use cases, packages that provide color palettes, and very experimental stuff.
:::



## {data-menu-title="Why we love ggplot2: Community" background-image="img/allison-horst-community.png" background-position="center" background-size="55%" background-color="#FFFFFF"}

::: {.sr-only}
An illustration by Allison Horst: A person in a cape that reads â€œcode heroâ€ who looks like they are flying through the air while typing on a computer while saying â€œIâ€™m doing a think all on my own!â€ The coderâ€™s arms and legs have ropes attached to two hot air balloons lifting them up, with labels on the balloons including â€œteachersâ€, â€œbloggersâ€, â€œfriendsâ€, â€œdevelopersâ€. Below the code hero, several people carry a trampoline with labels â€œsupportâ€ and â€œcommunityâ€ that will catch them if they fall.
:::

::: footer
Illustration by [Allison Horst](https://allisonhorst.com/allison-horst)
:::




# Why Go Interactive?



## Why Go Interactive?

TODO: Tanya  
Use Cases Slide &rarr; storytelling (exploratory), web app development, interactive journalism, wow stakeholders (interactive slides) - but not everything has to be interactive (cf. goal, purpose, budget) 



## Why {ggiraph}

TODO: Tanya  
Text / Bullet point list reasons  



## Why {ggiraph}

TODO: Tanya  
Comparing geoms, geom ggplot -> geom ggiraph (show how similar)  
Note: makes sense to include it after the plotly <-> ggiraph


<!--
## <span style='font-size:.7em;'>{ggplot2} ðŸ“¦</span>

```{r}
#| label: example-ggplot
#| echo: false
#| fig-align: center
p_ggplot 
```
-->


## <span style='font-size:.7em;'>{ggiraph} ðŸ“¦</span>

```{r}
#| label: example-ggiraph
#| echo: false
#| fig-align: center
girafe(
  ggobj = p_ggiraph_css, width_svg = 9, height_svg = 5.2,
  options = list(
    opts_tooltip(
      use_fill = TRUE, offx = 18, offy = -35,
      css = "font-size:16pt;font-weight:500;padding:12px;font-family:asap condensed;"
    ),
    opts_hover(
      css = "opacity:1;stroke-width:3px;r:5px;transition:all 0.2s ease;"
    ),
    opts_hover_inv(css = "opacity:0.3;")
  )
)
``` 



## <span style='font-size:.7em;'>{plotly} ðŸ“¦</span>

```{r}
#| label: example-plotly
#| echo: false
#| fig-align: center
p_plotly
```



# Showcase



---

```{r}
#| label: heatmap-simpsons-simple
#| echo: false
#| fig-align: center
girafe(
  ggobj = p_simpsons,
  width_svg = 10.8, height_svg = 9.2,
  options = list(
    opts_tooltip(
      opacity = 1, use_fill = TRUE, offx = 12, offy = 12,
      css = "color: black; padding: 10px;"
    ),
    opts_hover_inv(css = "opacity:0.3;"),
    opts_sizing(width = .8)
  )
)
```



## Style Tooltips & Effects

<br>

```{r}
#| label: example-styling-css-options-1
#| eval: false
#| code-line-numbers: "1,11|1,2,3,11|1,4,10,11|1,4,5,6,7,8,10,11|1,4,9,10,11"
girafe(
  ggobj = p_simpsons,
  width_svg = 10.8, height_svg = 9.2,
  options = list(
    opts_tooltip(
      opacity = 1, use_fill = TRUE, offx = 12, offy = 12,
      css = "color: black; padding: 15px;"
    ),
    opts_hover_inv(css = "opacity: 0.3;")
  )
)
```



---

```{r}
#| label: heatmap-simpsons-advanced
#| echo: false
#| fig-align: center
girafe(
  ggobj = p_simpsons_advanced,
  width_svg = 10.8, height_svg = 9.2,
  options = list(
    opts_tooltip(
      opacity = 1, use_fill = TRUE, offx = 12, offy = 12,
      css = "
background-color: white; 
padding: 15px;
border-radius: 12px; 
border: 2px solid white;
box-shadow: 5px 5px 5px rgba(0,0,0,0.3);
"
    ),
    opts_hover(css = "stroke-width:2px;stroke:black;"),
    opts_hover_inv(css = "opacity:0.3;"),
    opts_sizing(width = .8)
  )
)
```



## Style Tooltips & Effects

<br>

```{r}
#| label: example-styling-css-options-2
#| eval: false
#| code-line-numbers: "1,3,4,5,6,7,8,9|10,11"
opts_tooltip(
  opacity = 1, use_fill = TRUE, offx = 12, offy = 12,
  css = "
background-color: white; 
padding: 15px;
border-radius: 12px; 
border: 2px solid white;
box-shadow: 5px 5px 5px rgba(0,0,0,0.3);
"
),
opts_hover(css = "stroke-width: 2px; stroke: black;"),
opts_hover_inv(css = "opacity: 0.3;")
```



## Style Tooltips & Effects

<br>

```{r}
#| label: example-styling-css-mutate
#| eval: false
#| code-line-numbers: "1,2,3,4,5,6,7,8,9,10,11,12,13|2|3,4,5,6,7,8,9,10,11,12"
mutate(
  text_color = if_else(between(rating, 6.3, 8.5), "black", "white"),
  tooltip = paste0(
    "<span style='font-family: Rethink Sans; color: ", text_color, ";'>", 
      "S", sprintf("%02d", season), " E", sprintf("%02d", episode), 
      "<br>",
      "<b style='font-size: 150%; font-family: Piazzolla;'>", 
        str_replace_all(str_wrap(title, 22), "\\n", "<br>"), 
      "</b>", 
      "<br><br>",
      "IMDb Rating: ", sprintf("%1.1f", rating)),
    "</span>"
  )
```



## Link Data Across Plots

```{r}
#| label: example-combined-plots
#| echo: false
#| fig-align: center
girafe(
  ggobj = combined_owid, width_svg = 12, height_svg = 5.3,
  options = list(
    opts_tooltip(use_fill = TRUE, css = "
font-size: 17px; 
font-weight: 400; 
font-family: Spline Sans; 
color:white; 
padding: 10px; 
border:2px solid white;
border-radius: 5px; 
"), 
    opts_hover(css = "stroke: white; stroke-width: 0.5px; opacity: 1;"),
    opts_hover_inv(css = "opacity: 0.2;"),
    opts_toolbar(position = "bottomright"),
    opts_zoom(min = 1, max = 4)
  )
)
```

<div style='text-align:center;font-size:.4em;line-height:.85 !important;'>
<br>Part of our interactive online workshop<br><a href="https://www.ggplot2-uncharted.com/" style='font-weight:700;font-size:1.3em;'>ggplot2-uncharted.com</a>
</div>



## Highlight Example 

TODO: Tanya



## Shiny Example

TODO: Tanya



## Wrap-Up



## 1:1 Questions



## {data-menu-title="ggplot2 [un]charted" .center}

![[ggplot2-uncharted.com](https://www.ggplot2-uncharted.com/)](img/ggplot-uncharted.png){width="87%" fig-align="center" fig-alt='Screenshot of our interactive online course "ggplot2 [un]charted"'}

::: footer
:::


<!--
---

<center>
<video autoplay="true" loop="true" height="50%">
<source src="./img/uncharted-preview.mp4"> 
</video>
</center>

::: footer
[ggplot2-uncharted.com](https://www.ggplot2-uncharted.com/)
:::
-->

