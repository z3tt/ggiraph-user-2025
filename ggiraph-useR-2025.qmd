---
title: 'Plot Twist'
subtitle: 'Adding Interactivity to the Elegance of <code>ggplot2</code> with <code>ggiraph</code>'
author:
  - name: Tanya Shapiro
    email: tanya@indievisual.tech
  - name: Cédric Scherer
    email: viz@cedricscherer.com
#author: "Cédric Scherer & Tanya Shapiro<br>useR 2025"
title-slide-attributes:
    data-background-image: img/bg-placeholder.png
    data-background-size: cover
format:
  revealjs:
    theme: src/slides.scss
    footer: ''
    transition: fade
    progress: true
    multiplex: false
    preview-links: true
    scrollable: false
    hide-inactive-cursor: true
    highlight-style: printing
    chalkboard:
      theme: whiteboard
      boardmarker-width: 4
      buttons: true
    pause: true
editor: source
knitr:
  opts_chunk:
    dev: "ragg_png"
    retina: 1
    dpi: 300
execute:
  freeze: auto
  cache: true
  echo: true
  fig-width: 12
  fig-height: 7.8
  fig-align: center
---

```{r}
#| label: setup
#| include: false
#| cache: false
library(readr)
library(dplyr)
library(ggplot2)
# library(plotly) # -> include a showcase how ggplotly can change the custom designs?
library(ggiraph)
```



# Welcome<br>1 combined slide



##

::::: {.columns}

:::: {.column width="50%"}

### <span class='gradient-1'>Hi, I am Tanya</span>

<div style='margin:-30px 0 30px 0;'>
<a href='mailto:tanya@indievisual.tech' class='gradient-1' style='font-weight:700;'>tanya@indievisual.tech</a>
</div>

![](https://images.squarespace-cdn.com/content/v1/6022b7409a0cdd54b1bc0c5f/e2dd9234-dd19-48e5-8c5d-4eb64f7f5ea4/T2.jpg){fig-alt="Headshot of Tanya Shapiro" width="65%"}

<p class='about'>
<span class='entry'>BEFORE</span><br>
your previous job here
</p>
<p class='about'>
<span class='entry'>NOW</span><br>
your freelance title here
</p>

::::

:::: {.column width="50%"}

::: fragment

### <span class='gradient-2'>Hi, I am Cédric</span>

<div style='margin:-30px 0 30px 0;'>
<a href='mailto:viz@cedricscherer.com' class='gradient-2' style='font-weight:700;'>viz@cedricscherer.com</a>
</div>

![](img/ced-circular-logo-jungle.png){fig-alt="Headshot of Cédric Scherer" width="65%"}

<p class='about'>
<span class='entry'>BEFORE</span><br>
Computational Ecologist
</p>
<p class='about'>
<span class='entry'>NOW</span><br>
Independent professional in data visualization & information design
</p>

:::

::::

:::::



## Why we love {ggplot2}<br>3 slides



## Why we love {ggplot2}

Grammar of Graphics &rarr; cake slide  
TODO: Tanya



## Why we love {ggplot2}

TODO: Cédric  
Extensions &rarr; ggplot universe or hex logos 



## Why we love {ggplot2}

TODO: Cédric  
Community &rarr; illustration from Allison



# Why go interactive<br>1 slide



## Why go interactive

TODO: Tanya  
Use Cases Slide &rarr; storytelling (exploratory), web app development, interactive journalism, wow stakeholders (interactive slides) - but not everything has to be interactive (cf. goal, purpose, budget)  



# Why {ggiraph}<br>3 slides



## Why {ggiraph}

TODO: Tanya  
Text / Bullet point list reasons  



## Why {ggiraph}

TODO: Tanya  
Comparing geoms, geom ggplot -> geom ggiraph (show how similar)



## Why {ggiraph}

TODO: Cédric  
Example of ggiraph vs. ggplotly  - show plotly ruins theme + doesnt allow for extensions



# Examples


## {data-menu-title="Simpsons Ratings"}

```{r}
#| label: setup-simpsons
#| include: false
#| cache: false

gdtools::register_gfont("Rethink Sans")
gdtools::addGFontHtmlDependency(family = "Rethink Sans")

gdtools::register_gfont("Piazzolla")
gdtools::addGFontHtmlDependency(family = "Piazzolla")

tooltip_css <- "background-color:white;padding:15px;border-radius:3px;lineheight:1.4; border:2px solid white;"
```

```{r}
#| label: heatmap-simpsons
#| echo: false
#| cache: false
simpsons_imdb <- readr::read_csv("data/simpsons_imdb_ratings.csv")

simp <-
  simpsons_imdb |> 
  mutate(
    title = stringr::str_replace_all(stringr::str_wrap(title, 22), "\\n", "<br>"),
    text_color = if_else(imdb_rating > 6.3 & imdb_rating < 8.5, "black", "white"),
    lab = paste0("<span style='font-family:Rethink Sans;color:", text_color, ";'>", "S", sprintf("%02d", season), " E", sprintf("%02d", episode), "<br><b style='font-size:150%;font-weight:600;font-family:piazzolla;'>", title, "</b><br><br>IMDb Rating: ", sprintf("%1.1f", imdb_rating))
  ) |> 
  ggplot(aes(x = episode, y = season, fill = imdb_rating)) +
  geom_tile_interactive(aes(tooltip = lab, data_id = id)) +
  geomtextpath::geom_texthline(
    yintercept = 9.5, linewidth = 1, label = "Season 10 starts", 
    vjust = 1.4, hjust = .995, family = "Rethink Sans", lineheight = .6
  ) +
  coord_cartesian(expand = FALSE, clip = "off") +
  scale_x_continuous(breaks = c(1, 1:5*5), limits = c(NA, 27), position = "top") +
  scale_y_reverse(breaks = c(1, 1:5*5, 27)) +
  scico::scale_fill_scico(
    palette = "roma", name = "IMDb Rating",
    guide = guide_colorbar(title.position = "top"), midpoint = mean(simpsons_imdb$imdb_rating)
  ) +
  labs(title = 'From season 10 onwards, IMDb ratings for\n"The Simpsons" dropped considerably',
       x = "Episode →", y = "← Season") +
  theme_minimal(base_family = "Rethink Sans", base_size = 15) +
  theme(panel.grid = element_blank(),
        axis.text = element_blank(),
        axis.title.x.top = element_text(margin = margin(t = 0, b = 6), hjust = 0),
        axis.title.y = element_text(margin = margin(r = 6), hjust = .99),
        plot.title.position = "plot",
        plot.title = element_text(face = "bold", family = "Piazzolla", size = rel(2), margin = margin(b = 25)),
        legend.position = "top", legend.justification = "left",
        legend.key.width = unit(6, "lines"), legend.key.height = unit(.45, "lines"),
        #plot.background = element_rect(fill = "transparent", color = NA),
        plot.margin = margin(rep(12, 1)))

girafe(
  ggobj = simp,
  width_svg = 10.5, height_svg = 8.5,
  options = list(
    opts_tooltip(css = tooltip_css, opacity = 1, use_fill = TRUE, offx = 10, offy = 10),
    opts_sizing(width = .7),
    opts_hover_inv(css = "opacity:0.3;"),
    opts_hover(css = "stroke-width:2;")
  )
)
```



## Wrap-Up



## Questions



## Thank You



## Promo


